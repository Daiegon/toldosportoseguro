<script>
    $(".list-group-item").click(function(e) { e.preventDefault(); });

    $(document).ready(function(){
    	/*
    	var bgCounter = 0,
	        backgrounds = [
	           "source/images/slide/1.jpg",
	           "source/images/slide/2.jpg",
	           "source/images/slide/3.jpg",
	           "source/images/slide/4.jpg"
	        ];
		    function changeBackground()
		    {
		        bgCounter = (bgCounter+1) % backgrounds.length;
		        $('body').fadeTo('slow', 0.3, function(){
				   $('body').css('background-image', 'url('+backgrounds[bgCounter]+')');
				}).fadeTo('slow', 1);
		        setTimeout(changeBackground, 5000);

		    }
		    changeBackground();
		    */
		{% if page.url == '/galeria.html' %}

			$('li a').on('click',function(){

			    var src = $(this).attr('href');
			    var img = '<img src="' + src + '" class="img-responsive"/>';

			    var index = $(this).parent('li').index();
				var html = '';
				html += img;
				html += '<div class="row controles-galeria">';
				html += '<div class="col-xs-6 text-center">';
					html += '<a class="controls previous btn btn-dark" href="' + (index) + '"><span class="glyphicon glyphicon-circle-arrow-left"></span></a>';
				html += '</div>';
				html += '<div class="col-xs-6 text-center">';
					html += '<a class="controls next btn btn-dark" href="'+ (index+2) + '"><span class="glyphicon glyphicon-circle-arrow-right"></span></a>';
				html += '</div>';
				html += '</div>';

			    $('#galeria').modal();
			    $('#galeria').on('shown.bs.modal', function(){
			        $('#galeria .modal-body').html(html);
			    });
			    $('#galeria').on('hidden.bs.modal', function(){
			        $('#galeria .modal-body').html('');
			    });
			    return false;
			});

		{% endif %}
    });
	$(document).on('click', 'a.controls', function(){
	    var index = $(this).attr('href');
	    var src = $('ul.galeria li:nth-child('+ index +') a').attr('href');             
	    
	    $('.modal-body img').attr('src', src);
	    
	    var newPrevIndex = parseInt(index) - 1; 
	    var newNextIndex = parseInt(newPrevIndex) + 2; 
	    
	    if($(this).hasClass('previous')){               
	        $(this).attr('href', newPrevIndex); 
	        $('a.next').attr('href', newNextIndex);
	    }else{
	        $(this).attr('href', newNextIndex); 
	        $('a.previous').attr('href', newPrevIndex);
	    }
	    
	    var total = $('ul.galeria li').length + 1; 
	    //hide next button
	    if(total === newNextIndex){
	        $('a.next').hide();
	    }else{
	        $('a.next').show()
	    }            
	    //hide previous button
	    if(newPrevIndex === 0){
	        $('a.previous').hide();
	    }else{
	        $('a.previous').show()
	    }
	    
	    
	    return false;
	});

</script>